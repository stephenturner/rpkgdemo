[{"path":"https://stephenturner.github.io/rpkgdemo/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 rpkgdemo authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":[]},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"positron","dir":"Articles","previous_headings":"Setup","what":"Positron","title":"R Package Development with Positron","text":"follow along live workshop, ‚Äôll need things get set . First, ‚Äôll need install R Positron. follow along full tutorial ‚Äôll need following packages installed:","code":"install.packages(c(   \"usethis\",   \"devtools\",   \"roxygen2\",   \"testthat\",   \"knitr\",   \"rmarkdown\",   \"pkgdown\",   \"available\",   \"dplyr\",   \"janitor\",   \"readxl\",   \"stringr\" ))"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"git-and-github","dir":"Articles","previous_headings":"Setup","what":"Git and GitHub","title":"R Package Development with Positron","text":"‚Äôll also want make sure git installed system, GitHub account set . also recommend setting SSH key (https://github.com/settings/keys) pushing code GitHub.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"air","dir":"Articles","previous_headings":"Setup","what":"Air","title":"R Package Development with Positron","text":"Optional, recommended: like set Air, R formatter R written Rust. automatically formats code whenever save, fixing indentation spacing issues. open settings.json file Command Palette (Cmd+Pon Mac/Linux, Ctrl+P Windows), run Preferences: Open User Settings (JSON) modify workspace specific settings, add format save:","code":"{     \"[r]\": {         \"editor.formatOnSave\": true,         \"editor.defaultFormatter\": \"Posit.air-vscode\"     },     \"[quarto]\": {         \"editor.formatOnSave\": true,         \"editor.defaultFormatter\": \"quarto.quarto\"     } }"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"rstudio-keybindings","dir":"Articles","previous_headings":"Setup","what":"RStudio keybindings","title":"R Package Development with Positron","text":"Optional, strongly recommended: like use RStudio keyboard shortcuts get things like Cmd+Shift+E run package check, Cmd+Shift+D document, Cmd+Shift+B build. user settings:","code":"{     \"workbench.keybindings.rstudioKeybindings\": true }"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"r-packages-tk","dir":"Articles","previous_headings":"","what":"R packages TK","title":"R Package Development with Positron","text":"Benefits loop - edit, document, build, check, commit, push graphic mermaid usethis","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"creating-our-package","dir":"Articles","previous_headings":"","what":"Creating our package","title":"R Package Development with Positron","text":"Let‚Äôs create package! , ‚Äôs useful check conflicts existing packages name, ‚Äôll also check Wikipedia, Wiktionary, run simple sentiment analysis make sure package name appropriate. like use positron start new start new folder, folder create package usethis::create_package(). create new folder somewhere system called rpkgdemo, open folder Positron, run following create package: Now one-time things need go .","code":"available::available(\"rpkgdemo\") usethis::create_package(\".\")"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"license","dir":"Articles","previous_headings":"Creating our package","what":"License","title":"R Package Development with Positron","text":"First, let‚Äôs run R CMD check see issues package skeleton. Run devtools::check() console, cmd+shift+E, command pallette cmd+shift+P ‚ÄúR: Check R Package‚Äù. Right away see ‚Äôs issue placeholder created usethis::create_package(). need add proper license. Let‚Äôs go ahead add MIT license : Edit LICENSE file add name. Run check .","code":"W  checking DESCRIPTION meta-information ...    Non-standard license specification:      `use_mit_license()`, `use_gpl3_license()` or friends to pick a      license usethis::use_mit_license() ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 6.2s  0 errors ‚úî | 0 warnings ‚úî | 0 notes ‚úî"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"git","dir":"Articles","previous_headings":"Creating our package","what":"Git","title":"R Package Development with Positron","text":"Now let‚Äôs initialize git repository package, corresponding repo GitHub. can Positron Source Control pane, console: Open command pallette run Developer: Reload window. take note GitHub repo URL. ‚Äôll need shortly.","code":"git init git add . git commit -m \"Initial commit\" git remote add origin <your-repo-url> git push -u origin main"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"the-description-file","dir":"Articles","previous_headings":"Creating our package","what":"The DESCRIPTION file","title":"R Package Development with Positron","text":"DESCRIPTION file metadata package. contains information package name, version, author, description, license, dependencies. Let‚Äôs go ahead edit file add information package. looks like box: Let‚Äôs edit look like (put name, email, package name, etc). Put URL GitHub repo URL field. Go ahead put GitHub pages URL (haven‚Äôt created yet later). repo url github.com/username/package, GitHub pages URL username.github.io/package.","code":"Package: rpkgdemo Title: What the Package Does (One Line, Title Case) Version: 0.0.0.9000 Authors@R:      person(\"First\", \"Last\", , \"first.last@example.com\", role = c(\"aut\", \"cre\")) Description: What the package does (one paragraph). License: MIT + file LICENSE Encoding: UTF-8 Roxygen: list(markdown = TRUE) RoxygenNote: 7.3.3 Package: rpkgdemo Title: A demo package for building R packages Version: 0.0.0.9000 Authors@R:      person(\"Stephen\", \"Turner\", , \"first.last@example.com\", role = c(\"aut\", \"cre\"),            comment = c(ORCID = \"0000-0001-9140-9028\")) Description: A package to demonstrate building an R package to accompany a     workshop on building R packages in Positron. See the getting started     vignette for details. License: MIT + file LICENSE URL: https://github.com/stephenturner/rpkgdemo, https://stephenturner.github.io/rpkgdemo/ BugReports: https://github.com/stephenturner/rpkgdemo/issues"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"functions-part-1","dir":"Articles","previous_headings":"","what":"Functions, part 1","title":"R Package Development with Positron","text":"fundamental building blocks R packages functions. Let‚Äôs add functions package.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"our-first-function-no-external-dependencies","dir":"Articles","previous_headings":"Functions, part 1","what":"Our first function: no external dependencies","title":"R Package Development with Positron","text":"Let‚Äôs add simple function doesn‚Äôt use external dependencies. function suppress data counts specified threshold replacing NA. might required public health setting protect privacy reporting small counts. functions need R/ directory package. regular .R files. can organize functions way like within directory. like group related functions together file. Let‚Äôs create file called utils.R hold utility functions. just create new file manually, like use usethis::use_r() function, pairs well usethis::use_test() ‚Äôll discuss later. example, create file named utils.R, run: Now let‚Äôs add function file. can try function console: Now need document function using special ‚Äúroxygen comments‚Äù can get help function ?suppress_counts. can learn roxygen2 syntax . easiest way Positron Code Action generate roxygen skeleton. Place cursor function name invoke Code Action clicking üí°.  result something looks like : can use function, need generate documentation files. can devtools::document() function, processes roxygen comments creates necessary files man/ directory. can also use keyboard shortcut cmd+shift+D run command. ‚Äôll see errors: Let‚Äôs go ahead fill full documentation. Document build package . Now try ?suppress_counts see help file.  Go ahead run check (cmd+shift+E) make sure everything working far.","code":"usethis::use_r(\"utils\") suppress_counts <- function(x, threshold = 5) {   # Check if input is numeric   if (!is.numeric(x)) {     stop(\"Input x must be numeric.\")   }    # Suppress counts below the threshold   x[x < threshold] <- NA    # Return the modified vector   return(x) } suppress_counts(c(1, 3, 5, 7, 9)) #> [1] NA NA  5  7  9 suppress_counts(c(10, 20, 3, 4, 5), threshold = 10) #> [1] 10 20 NA NA NA suppress_counts(c(\"a\", \"b\", \"c\")) #> Error in suppress_counts(c(\"a\", \"b\", \"c\")): Input x must be numeric. #' Title #' #' @param x #' @param threshold #' #' @returns #' #' @export #' @examples suppress_counts <- function(x, threshold = 5) {   # Check if input is numeric   if (!is.numeric(x)) {     stop(\"Input x must be numeric.\")   }    # Suppress counts below the threshold   x[x < threshold] <- NA    # Return the modified vector   return(x) } ‚úñ utils.R:3: @param requires two parts: an argument name and a description. ‚úñ utils.R:6: @returns requires a value. ‚úñ utils.R:9: @examples requires a value. #' Suppress Low Counts for Privacy #' #' Replaces numeric counts below a threshold with a suppression character (\"NA\"). #' #' @param x A numeric vector of counts. #' @param threshold Numeric. Values strictly less than this are suppressed. Default 5. #' #' @return A vector. #' @export #' #' @examples #' suppress_counts(c(1, 3, 5, 7, 9)) #' suppress_counts(c(10, 20, 3, 4, 5), threshold = 10) #' suppress_counts <- function(x, threshold = 5) {   # Check if input is numeric   if (!is.numeric(x)) {     stop(\"Input x must be numeric.\")   }    # Suppress counts below the threshold   x[x < threshold] <- NA    # Return the modified vector   return(x) } ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 8.7s  0 errors ‚úî | 0 warnings ‚úî | 0 notes ‚úî"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"adding-additional-arguments","dir":"Articles","previous_headings":"Functions, part 1","what":"Adding additional arguments","title":"R Package Development with Positron","text":"Now let‚Äôs add additional argument function allow users specify custom suppression value. R smart enough automatically change type character provide character suppression symbol. rebuild package function work: now run check (cmd+shift+E) ‚Äôll see warning: go back add documentation new symbol argument. Everything check ! Congratulations! ‚Äôve created first function, documented , built package! go , take look additional files created documented package. ‚Äôll never actually edit hand. NAMESPACE file: man/suppress_counts.Rd file: Prior Roxygen2, create files hand!","code":"#' Suppress Low Counts for Privacy #' #' Replaces numeric counts below a threshold with a suppression character (`NA`). #' #' @param x A numeric vector of counts. #' @param threshold Numeric. Values strictly less than this are suppressed. Default 5. #' #' @return A vector. #' @export #' #' @examples #' suppress_counts(c(1, 3, 5, 7, 9)) #' suppress_counts(c(10, 20, 3, 4, 5), threshold = 10) #' suppress_counts(1:10, threshold = 5, symbol = \"*\") #' suppress_counts <- function(x, threshold = 5, symbol = NA) {   # Check if input is numeric   if (!is.numeric(x)) {     stop(\"Input x must be numeric.\")   }    # Suppress counts below the threshold   x[x < threshold] <- symbol    # Return the modified vector   return(x) } suppress_counts(1:10, threshold = 5, symbol = \"*\") ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 9.2s  ‚ùØ checking Rd \\usage sections ... WARNING   Undocumented arguments in Rd file 'suppress_counts.Rd'     ‚Äòsymbol‚Äô      Functions with \\usage entries need to have the appropriate \\alias   entries, and all their arguments documented.   The \\usage entries must correspond to syntactically valid R code.   See chapter ‚ÄòWriting R documentation files‚Äô in the ‚ÄòWriting R   Extensions‚Äô manual.  0 errors ‚úî | 1 warning ‚úñ | 0 notes ‚úî Error: R CMD check found WARNINGs Execution halted #' Suppress Low Counts for Privacy #' #' Replaces numeric counts below a threshold with a suppression character (`NA`). #' #' @param x A numeric vector of counts. #' @param threshold Numeric. Values strictly less than this are suppressed. Default 5. #' @param symbol Character or `NA`. The symbol to use for suppression. Default is `NA`. #' #' @return A vector. #' @export #' #' @examples #' suppress_counts(c(1, 3, 5, 7, 9)) #' suppress_counts(c(10, 20, 3, 4, 5), threshold = 10) #' suppress_counts(1:10, threshold = 5, symbol = \"*\") #' suppress_counts <- function(x, threshold = 5, symbol = NA) {   # Check if input is numeric   if (!is.numeric(x)) {     stop(\"Input x must be numeric.\")   }    # Suppress counts below the threshold   x[x < threshold] <- symbol    # Return the modified vector   return(x) } ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 9.1s  0 errors ‚úî | 0 warnings ‚úî | 0 notes ‚úî # Generated by roxygen2: do not edit by hand  export(suppress_counts) % Generated by roxygen2: do not edit by hand % Please edit documentation in R/utils.R \\name{suppress_counts} \\alias{suppress_counts} \\title{Suppress Low Counts for Privacy} \\usage{ suppress_counts(x, threshold = 5, symbol = NA) } \\arguments{ \\item{x}{A numeric vector of counts.}  \\item{threshold}{Numeric. Values strictly less than this are suppressed. Default 5.}  \\item{symbol}{Character or \\code{NA}. The symbol to use for suppression. Default is \\code{NA}.} } \\value{ A vector. } \\description{ Replaces numeric counts below a threshold with a suppression character (\\code{NA}). } \\examples{ suppress_counts(c(1, 3, 5, 7, 9)) suppress_counts(c(10, 20, 3, 4, 5), threshold = 10) suppress_counts(1:10, threshold = 5, symbol = \"*\")  }"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"our-second-function-with-external-dependencies","dir":"Articles","previous_headings":"Functions, part 1","what":"Our second function: with external dependencies","title":"R Package Development with Positron","text":"Let‚Äôs add another function map messy categorical inputs standard codes (e.g., standardizing sex gender entries). ‚Äôre going mape various inputs like ‚ÄúM‚Äù, ‚Äúfemale‚Äù, etc. standard FHIR (Fast Health Interoperability Resources) HL7 specs healthcare interoperability. ‚Äôll using HL7 v2.3 allows F (Female), M (Male), O (), U (Unknown). Let‚Äôs go ahead stick R/utils.R well. Now, use function another package ‚Äôll need call function using :: operator avoid adding dependency entire package. case, ‚Äôll use dplyr::case_when() function dplyr package map various inputs standardized codes. Document build package try function . now run check (cmd+shift+E) ‚Äôll see error: ‚Äôre using function dplyr package haven‚Äôt declared package depends . fix , need add dplyr Imports field DESCRIPTION file. easiest way usethis::use_package() function: ‚Äôll see console: open DESCRIPTION file now, ‚Äôll see imported dependency: Now run check (cmd+shift+E) everything good! Take note package check took seconds longer, R load dplyr package check code. brings another point won‚Äôt cover today packages heavy dependencies. See pkgndep paper pkgndep package details analyzing dependency ‚Äúheaviness.‚Äù","code":"#' Standardize Sex Variables #' #' Maps various inputs (M, Male, f, Female) to standard HL7/ISO codes (M, F, O, U). #' #' @param x A character vector of sex/gender inputs. #' #' @return A character vector containing \"M\", \"F\", \"O\", or \"U\". #' @export #' #' @examples #' standardize_sex(c(\"Male\", \"f\", \"Trans female\", \"nonbinary\", \"unknown\", NA)) standardize_sex <- function(x) {   # Check if input is character   if (!is.character(x)) {     stop(\"Input x must be a character vector.\")   }    # trim whitespace and make lowercase   x <- trimws(tolower(as.character(x)))    # Map various inputs to standard codes   standardized <- dplyr::case_when(     x %in% c(\"male\", \"m\") ~ \"M\",     x %in% c(\"female\", \"f\") ~ \"F\",     grepl(\"trans|non|binary\", x) ~ \"O\",     .default = \"U\"   )    return(standardized) } standardize_sex(c(\"Male\", \"f\", \"Trans female\", \"nonbinary\", \"unknown\", NA)) #> [1] \"M\" \"F\" \"O\" \"O\" \"U\" \"U\" standardize_sex(c(1, 2, 1, 2)) #> Error in standardize_sex(c(1, 2, 1, 2)): Input x must be a character vector. ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 9.2s  ‚ùØ checking dependencies in R code ... WARNING   '::' or ':::' import not declared from: ‚Äòdplyr‚Äô  0 errors ‚úî | 1 warning ‚úñ | 0 notes ‚úî Error: R CMD check found WARNINGs Execution halted usethis::use_package(\"dplyr\") ‚úî Adding dplyr to Imports field in DESCRIPTION. ‚òê Refer to functions with `dplyr::fun()`. Imports:      dplyr ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 15.9s  0 errors ‚úî | 0 warnings ‚úî | 0 notes ‚úî"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"package-data","dir":"Articles","previous_headings":"","what":"Package data","title":"R Package Development with Positron","text":"‚Äôll come back add functions package soon, let‚Äôs take quick detour add package data. different ways include data package. Exported data. like iris dataset comes R, starwars data ‚Äôs available load dplyr. data stored data/ directory package made available users load package. Raw data. data stored inst/extdata/ (installed / external data) directory package can read functions needed. useful demonstrating functions reading data files. Internal data. data used internally package functions exported user. ‚Äôll cover first two tutorial.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"exported-data","dir":"Articles","previous_headings":"Package data","what":"Exported data","title":"R Package Development with Positron","text":"noted , exported data stored data/ directory package. data stored .rda format, must documented. data data/ usually clean version raw data ‚Äôve gathered elsewhere created code. sake reproducibility, ‚Äôs best practice include code used create data data-raw/ directory package. best way call usethis::use_data_raw() create data-raw/ directory template script creating data, along adding data-raw directory .Rbuildignore file doesn‚Äôt get included build package. create file data-raw/DATASET.R. can name file whatever want. ‚Äôre going create two datasets: one download web process/clean bit, another create completely code.","code":"usethis::use_data_raw()"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"external-data-from-the-web","dir":"Articles","previous_headings":"Package data > Exported data","what":"External data from the web","title":"R Package Development with Positron","text":"Let‚Äôs create dataset links ZIP code city state. can get data postal service https://postalpro.usps.com/ZIP_Locale_Detail. data-raw/DATASET.R, write run following code download excel file, read tab #2, cleanup writing . ‚Äôll see notes: Note last line ‚Äì need document data ! don‚Äôt believe , run check. Let‚Äôs go ahead document data. generally document package data R/data.R file. data documentation looks lot like function documentation. confusing things (1) never @export data, even though ‚Äôs technically exported, (2) simply enter \"datasetname\" roxygen block actually export data. look like : Document (cmd+shift+d), rebuild (cmd+shift+b), check (cmd+shift+e) everything good! Try running ?zipcodes see help file dataset.","code":"# It's okay to load a package in this file - it's not part of the package itself library(dplyr)  # Download the USPS ZIP code data tf <- tempfile() url <- \"https://postalpro.usps.com/mnt/glusterfs/2025-12/ZIP_Locale_Detail.xls\" download.file(url = url, destfile = tf)  # Read in the data zipcodes_raw <- readxl::read_excel(tf, sheet = \"ZIP_DETAIL\") zipcodes_raw  # select relevant columns and clean up zipcodes <-   zipcodes_raw |>   select(     zip = `DELIVERY ZIPCODE`,     city = `PHYSICAL CITY`,     state = `PHYSICAL STATE`   ) |>   distinct(zip, .keep_all = TRUE) |>   mutate(city = stringr::str_to_title(city)) |>   arrange(zip, city) zipcodes  # Save the dataset in the package usethis::use_data(zipcodes, overwrite = TRUE) > usethis::use_data(zipcodes, overwrite = TRUE) ‚úî Adding R to Depends field in DESCRIPTION. ‚úî Creating data/. ‚úî Setting LazyData to \"true\" in DESCRIPTION. ‚úî Saving \"zipcodes\" to \"data/zipcodes.rda\". ‚òê Document your data (see <https://r-pkgs.org/data.html>). ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ  Duration: 12.1s  ‚ùØ checking for missing documentation entries ... WARNING   Undocumented code objects:     ‚Äòzipcodes‚Äô   Undocumented data sets:     ‚Äòzipcodes‚Äô   All user-level objects in a package should have documentation entries.   See chapter ‚ÄòWriting R documentation files‚Äô in the ‚ÄòWriting R   Extensions‚Äô manual.  0 errors ‚úî | 1 warning ‚úñ | 0 notes ‚úî Error: R CMD check found WARNINGs Execution halted usethis::use_r(\"data\") #' ZIP code data #' #' ZIP code data from the US Postal Service. #' #' @format A data frame with three columns #' 1. `zip`: The ZIP code. #' 2. `city`: The U.S. city for that zip code. #' 3. `state`: The U.S. state for that zip code. #' #' @source <https://postalpro.usps.com/ZIP_Locale_Detail> #' #' @examples #' zipcodes #' \"zipcodes\""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"creating-data-from-code","dir":"Articles","previous_headings":"Package data > Exported data","what":"Creating data from code","title":"R Package Development with Positron","text":"data-raw/DATASET.R file, let‚Äôs create synthetic dataset can use demonstrate functions. Go ahead open R/data.R add documentation dataset well. Don‚Äôt close file, ‚Äôll come back momentarily. run document, build, check .","code":"# Create some sex variables to sample from sexes <- c(   \"male\",   \"female\",   \"Male\",   \"Female\",   \"M\",   \"F\",   \"m\",   \"f\",   \"transgender\",   \"trans male\",   \"Trans Female\",   \"non-binary\",   \"Unknown\",   \"unk\",   \"???\" ) sexes  # Get only virginia zip codes vazips <-   zipcodes |>   dplyr::filter(state == \"VA\") |>   dplyr::pull(zip) vazips  # Create a 1000 row dataset. Make sure to set a random seed! n <- 1000 set.seed(20251205) rped <-   tibble::tibble(     sex = sample(sexes, size = n, replace = TRUE),     age = sample(20L:60L, size = n, replace = TRUE),     zip = sample(vazips, size = n, replace = TRUE),     lab1 = rpois(n, lambda = 2),     lab2 = rpois(n, lambda = 10)   ) |>   arrange(zip) |>   mutate(id = row_number(), .before = 1) # Add some noise rped$zip[1] <- \"12345\" rped$age[2] <- 12 rped$age[3] <- 120 rped  # Save the dataset in the package usethis::use_data(rped, overwrite = TRUE) #' RPED: R Package Example Data #' #' Simulated data for demonstrating the functionality of the rpkgdemo package. #' #' @format A data frame with 6 columns: #' 1. `id`: A unique identifier for each individual. #' 2. `sex`: The sex of the individual. #' 3. `age`: The age of the individual. #' 4. `zip`: The ZIP code of the individual's residence. #' 5. `lab1`: A simulated lab value from a Poisson distribution with lambda=2. #' 6. `lab2`: A simulated lab value from a Poisson distribution with lambda=10. #' #' @examples #' rped #' \"rped\""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"raw-data","dir":"Articles","previous_headings":"Package data","what":"Raw data","title":"R Package Development with Positron","text":"minutes ‚Äôre going write function read data like CSV file sets options readr::read_csv() defaults. created example data can work just running rped, write examples (later tests) function read files, actually need data stored file can access function. Go back data-raw/DATASET.R file add end data generation script . ‚Äôve never used ::() , ‚Äôs great way create file paths relative root project, regardless working directory. looks .git directory DESCRIPTION file. Try . Rebuild package, try running code . retrieve absolute path installed raw data system. ‚Äôll look different see .","code":"# Write as installed data extdatadir <- here::here(\"inst/extdata\") extdatadir dir.create(extdatadir, recursive = TRUE) readr::write_csv(rped, here::here(\"inst/extdata/rped.csv\")) system.file(\"extdata/rped.csv\", package = \"rpkgdemo\") #> [1] \"/home/runner/work/_temp/Library/rpkgdemo/extdata/rped.csv\""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"functions-part-2","dir":"Articles","previous_headings":"","what":"Functions, part 2","title":"R Package Development with Positron","text":"Now built-package data (exported raw files), let‚Äôs add functions.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"read-in-raw-data","dir":"Articles","previous_headings":"Functions, part 2","what":"Read in raw data","title":"R Package Development with Positron","text":"First, let‚Äôs write function read data like created file. Sure, just use readr::read_csv(). imagine ‚Äôve got data zip codes 02108 (Boston, MA) 00901 (San Juan, PR)? zip codes leading zeros get stripped read numeric. let‚Äôs create function always reads zip codes character, sex character, age integer. try read data function, ‚Äôll throw warnings /errors. Back R/utils.R, add function, fully documented, examples. Note prefix readr functions readr::. Note example uses system.file() get path installed raw data file created earlier. Document, build, check. Oops ‚Äì warning. forgot import readr package! Add Imports DESCRIPTION usethis: Check clean.","code":"#' Read laboratory data #' #' Read laboratory data from a file #' #' @param file A file path #' #' @returns A data frame #' @export #' #' @examples #' fp <- system.file(\"extdata/rped.csv\", package = \"rpkgdemo\", mustWork = TRUE) #' read_labdata(fp) #' read_labdata <- function(file) {   readr::read_csv(     file,     col_types = readr::cols(       sex = readr::col_character(),       age = readr::col_integer(),       zip = readr::col_character(),       .default = readr::col_guess()     )   ) } ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 13.7s  ‚ùØ checking dependencies in R code ... WARNING   '::' or ':::' import not declared from: ‚Äòreadr‚Äô  0 errors ‚úî | 1 warning ‚úñ | 0 notes ‚úî Error: R CMD check found WARNINGs Execution halted usethis::use_package(\"readr\")"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"using-dplyr-data-masking-in-packages","dir":"Articles","previous_headings":"Functions, part 2","what":"Using dplyr data masking in packages","title":"R Package Development with Positron","text":"Let‚Äôs add another function uses piped dplyr code data masking. ‚Äôs full function roxygen documentation. standardizes sex variable using earlier function, joins zipcodes data, centers scales lab values. Write function, document, build package, function work. happens check package? get weird NOTEs. dplyr data masking pipe operator (|>). R CMD check can‚Äôt see sex zipcodes coming , throws NOTE. can see lots solutions problem Googling asking Chat fix ‚Äúvisible binding global variable‚Äù problem. involve declaring global variables. best practice described Using dplyr packages vignette. best way ‚Äú.data pronoun‚Äù rlang. ‚Äôll put .data$ front sex. ‚Äôll also need explicitly reference zipcodes data package ‚Äôre building rpkgdemo::zipcodes. can now, ‚Äôll get another note saying undefined global function/variable called .data. way fix import .data rlang usethis. . ‚Äôll get note package-level documentation. Go ahead accept. Document, rebuild, check. Finally, let‚Äôs add sanity checking function throw warnings ZIP codes aren‚Äôt real, ages range, minors dataset. Notice ‚Äôm adding option whether warnings issued . ‚Äôll examine get testing . ‚Äôs final function:","code":"#' Prepare lab data #' #' Prepare lab data for analysis. Standardizes the `sex` variable, joins with `zipcodes` data, centers and scales lab values. #' #' @param x A data frame containing lab data with at least `sex`, `zip`, and lab value columns starting with \"lab\". #' #' @returns A data frame with standardized `sex`, joined `zipcodes`, and scaled lab values. #' @export #'  #' @examples #' prep_lab_data(rped) #'  prep_lab_data <- function(x) {   x |>     dplyr::mutate(sex = standardize_sex(sex)) |>     dplyr::left_join(zipcodes, by = \"zip\") |>     dplyr::mutate(dplyr::across(dplyr::starts_with(\"lab\"), \\(x) scale(x)[, 1])) } ‚îÄ‚îÄ R CMD check results ‚îÄ‚îÄ rpkgdemo 0.0.0.9000 ‚îÄ‚îÄ Duration: 12.7s  ‚ùØ checking R code for possible problems ... NOTE   prep_lab_data: no visible binding for global variable ‚Äòsex‚Äô   prep_lab_data: no visible binding for global variable ‚Äòzipcodes‚Äô   Undefined global functions or variables:     sex zipcodes  0 errors ‚úî | 0 warnings ‚úî | 1 note ‚úñ usethis::use_import_from(\"rlang\", \".data\") #' Prepare lab data #' #' Prepare lab data for analysis. Standardizes the `sex` variable, joins with `zipcodes` data, centers and scales lab values. #' #' @param x A data frame containing lab data with at least `sex`, `zip`, and lab value columns starting with \"lab\". #' @param warnings Logical. Whether to issue warnings for potential data issues (bad zip codes, minors, unrealistic ages). Default is `TRUE`. #' #' @returns A data frame with standardized `sex`, joined `zipcodes`, and scaled lab values. #' @export #' #' @examples #' prep_lab_data(rped) #' prep_lab_data <- function(x, warnings = TRUE) {   # Check for potential issues   if (warnings) {     # Check for bad zip codes     badzips <- !(x$zip %in% rpkgdemo::zipcodes$zip)     if (any(badzips)) {       warning(paste0(\"Found \", sum(badzips), \" bad zip code(s).\"))     }      # Check for minors     minors <- x$age < 18     if (any(minors)) {       warning(paste0(\"Found \", sum(minors), \" minor(s) in dataset.\"))     }      # Check for unrealistic numbers     unrealistic <- x$age < 0 | x$age > 120     if (any(unrealistic)) {       warning(paste0(         \"Found \",         sum(unrealistic),         \" unrealistic age(s) in dataset.\"       ))     }   }    # Prepare the data   result <-     x |>     dplyr::mutate(sex = standardize_sex(.data$sex)) |>     dplyr::left_join(rpkgdemo::zipcodes, by = \"zip\") |>     dplyr::mutate(dplyr::across(dplyr::starts_with(\"lab\"), \\(x) scale(x)[, 1]))   return(result) }"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"tests","dir":"Articles","previous_headings":"","what":"Tests","title":"R Package Development with Positron","text":"Testing essential part building robust R package. helps ensure functions work expected can catch bugs early development process. ‚Äôll use testthat package, popular testing framework R community. can read testing Testing chapter R Packages book testthat documentation.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"setting-up-testthat","dir":"Articles","previous_headings":"Tests","what":"Setting up testthat","title":"R Package Development with Positron","text":"always, ‚Äôll use usethis set testing infrastructure. Just used usethis::use_r(\"utils\") create R/utils.R, ‚Äôll use similar pattern create initial testthat infrastructure, test file utils.R functions. Go ahead play around boilerplate multiplication test already set . can run package tests devtools::test() keyboard shortcut cmd+shift+T.","code":"usethis::use_test(\"utils\") ‚úî Adding testthat to Suggests field in DESCRIPTION. ‚úî Adding \"3\" to Config/testthat/edition. ‚úî Creating tests/testthat/. ‚úî Writing tests/testthat.R. ‚úî Writing tests/testthat/test-utils.R. ‚òê Modify tests/testthat/test-utils.R."},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"our-first-real-tests","dir":"Articles","previous_headings":"Tests","what":"Our first real tests","title":"R Package Development with Positron","text":"point want open utils.R test-utils.R side side start writing tests cover every component code. Let‚Äôs go detail ‚Äôm . Notice ‚Äôm first creating result object res holds result running function. ‚Äôm wrapping whole assignment expect_silent(), fail function throws warning. ‚Äôm using expect_*() functions check result expect. Finally, ‚Äôm also testing function throws error given incorrect input, . function doesn‚Äôt throw error , test fail.","code":"test_that(\"suppress_counts\", {   # Correct usage   expect_silent(res <- suppress_counts(c(1, 3, 5, 7, 9)))   expect_equal(res, c(NA, NA, 5, 7, 9))   expect_silent(res <- suppress_counts(c(10, 20, 3, 4, 5), threshold = 10))   expect_true(all(is.na(res[3:5])))   expect_silent(res <- suppress_counts(1:10, threshold = 5, symbol = \"*\"))   expect_true(all(res[1:4] == \"*\"))   # Incorrect usage   expect_error(suppress_counts(\"not numeric\")) })"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"coverage-with-covr","dir":"Articles","previous_headings":"Tests","what":"Coverage with covr","title":"R Package Development with Positron","text":"Testing possible use cases functions can tedious. covr package can help identify lines code covered tests . can get high-level summary test coverage : telling us terrible coverage. Let‚Äôs keep adding tests file: time, instead running covr::package_coverage(), let‚Äôs use covr::report() function generate HTML report can view web browser. report show lines code covered tests .  click particular source code file, can see coverage don‚Äôt. ‚Äôs clear coverage report didn‚Äôt test error handling standardize_sex() function, didn‚Äôt test remaining functions .  can continue writing tests 100% coverage, real life ‚Äôs always feasible. Aim high coverage, focus testing important parts code. Pro-tip: nearly Frontier AI model can automate tedious parts writing tests . ‚Äôve good success Positron Assistant. Make sure document, build, check one last time ensure everything working. Notice now run devtools::check() automatically runs tests package!","code":"covr::package_coverage() > covr::package_coverage() rpkgdemo Coverage: 9.30% R/utils.R: 9.30% test_that(\"standardize_sex\", {   result <- standardize_sex(c(\"Male\", \"male\", \"M\", \"m\"))   expect_equal(result, c(\"M\", \"M\", \"M\", \"M\"))   result <- standardize_sex(c(\"Female\", \"female\", \"F\", \"f\"))   expect_equal(result, c(\"F\", \"F\", \"F\", \"F\"))   result <- standardize_sex(c(     \"Trans female\",     \"transgender\",     \"nonbinary\",     \"non-binary\"   ))   expect_equal(result, c(\"O\", \"O\", \"O\", \"O\"))   result <- standardize_sex(c(\"unknown\", \"xyz\", \"\"))   expect_equal(result, c(\"U\", \"U\", \"U\"))   result <- standardize_sex(c(\"  Male  \", \"  female  \"))   expect_equal(result, c(\"M\", \"F\")) }) covr::report() covr::package_coverage() rpkgdemo Coverage: 100.00% R/utils.R: 100.00% devtools::test() ‚Ñπ Testing rpkgdemo ‚úî | F W  S  OK | Context ‚úî |         25 | utils                 ‚ïê‚ïê Results ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê========== [ FAIL 0 | WARN 0 | SKIP 0 | PASS 25 ]"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"readme-rmd","dir":"Articles","previous_headings":"","what":"README.Rmd","title":"R Package Development with Positron","text":"README file first thing people see visit package repository GitHub. ‚Äôs great place provide overview package, install , basic usage examples. can create README file using R Markdown, allows include formatted text, code chunks, output. ‚Äôll name file README.Rmd, can use devtools::build_readme() render README.md, GitHub displays. create README.Rmd file, can use usethis::use_readme_rmd() function. use devtools::build_readme() render . Besides just running knitr render file, installs temporary copy package renders README.Rmd clean session.","code":"usethis::use_readme_rmd() devtools::build_readme()"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"github-actions","dir":"Articles","previous_headings":"","what":"GitHub Actions","title":"R Package Development with Positron","text":"GitHub Actions (GHA) allow automate workflows package, running tests package checks, building documentation. usethis package provides functions set common GHA workflows R packages. create necessary YAML files .github/workflows/ directory package run package check whenever (1) push merge main branch, (2) open pull request main branch development branch.  Taking step furtner, can go settings GitHub repository, click Rules section, create new branch protection rule require (1) pull requests main, blocking direct pushes main, (2) R CMD check action passes allowing pull request merged main. something causes check fail, can‚Äôt merge main!  can go details see happened:  fix issue can merge main:","code":"usethis::use_github_action(\"check-release\") ‚úî Setting active project to \"/Users/sdt5z/repos/rpkgdemo\". ‚úî Creating .github/. ‚úî Adding \"^\\\\.github$\" to .Rbuildignore. ‚úî Adding \"*.html\" to .github/.gitignore. ‚úî Creating .github/workflows/. ‚úî Saving \"r-lib/actions/examples/check-release.yaml@v2\" to .github/workflows/R-CMD-check.yaml. ‚òê Learn more at <https://github.com/r-lib/actions/blob/v2/examples/README.md>. ‚úî Adding \"R-CMD-check badge\" to README.Rmd. ‚òê Re-knit README.Rmd with devtools::build_readme(). > devtools::build_readme() ‚Ñπ Installing rpkgdemo in temporary library ‚Ñπ Building /Users/sdt5z/repos/rpkgdemo/README.Rmd"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"pkgdown","dir":"Articles","previous_headings":"","what":"pkgdown","title":"R Package Development with Positron","text":"pkgdown package makes easy create website R package. website can include function reference, vignettes, articles, . can set pkgdown package using usethis::use_pkgdown() function. render site, make sure README date. Now, can build site pkgdown::build_site(). builds complete website rendering home page README, function reference docs, articles vignettes, NEWS files, LLM docs, . See pkgdown website package: Homepage: https://stephenturner.github.io/rpkgdemo/ Vignette (full tutorial): https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html Function reference: https://stephenturner.github.io/rpkgdemo/reference/index.html pkgdown package also creates LLMs.txt root site contains contents README.md, reference index, articles index. also creates .md file every existing .html file site. Together, gives LLM overview package ability find following links. example: https://stephenturner.github.io/rpkgdemo/llms.txt https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.md https://stephenturner.github.io/rpkgdemo/reference/index.md https://stephenturner.github.io/rpkgdemo/reference/prep_lab_data.md Finally, can automate deployment pkgdown website yet another GitHub Action: vignette : Now whenever push new changes main, pkgdown site rebuilt redeployed automatically.","code":"usethis::use_pkgdown() devtools::build_readme() pkgdown::build_site() usethis::use_pkgdown_github_pages() ‚úî Writing _pkgdown.yml. ‚òê Modify _pkgdown.yml. ‚úî Initializing empty, orphan branch \"gh-pages\" in GitHub repo \"stephenturner/rpkgdemo\". ‚úî GitHub Pages is publishing from: ‚Ä¢ URL: \"https://stephenturner.github.io/rpkgdemo/\" ‚Ä¢ Branch: \"gh-pages\" ‚Ä¢ Path: \"/\" ‚úî Saving \"r-lib/actions/examples/pkgdown.yaml@v2\" to .github/workflows/pkgdown.yaml. ‚òê Learn more at <https://github.com/r-lib/actions/blob/v2/examples/README.md>. ‚úî Recording <https://stephenturner.github.io/rpkgdemo/> as site's url in _pkgdown.yml. ‚òê Run devtools::document() to update package-level documentation. ‚úî Setting <https://stephenturner.github.io/rpkgdemo/> as homepage of GitHub repo \"stephenturner/rpkgdemo\"."},{"path":[]},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"vignettes","dir":"Articles","previous_headings":"Other topics","what":"Vignettes","title":"R Package Development with Positron","text":"can create vignette usethis::use_vignette(). creates vignettes/ directory template R Markdown file vignette. name vignette name package (‚Äúrpkgdemo‚Äù ), main vignette shows first pkgdown site. Others show ‚Äúarticles‚Äù section. See https://dplyr.tidyverse.org/ example.","code":"usethis::use_vignette(\"rpkgdemo\")"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"news","dir":"Articles","previous_headings":"Other topics","what":"NEWS","title":"R Package Development with Positron","text":"can create basic NEWS.md file usethis::use_news_md(). also adds link new Changelog page pkgdown site.","code":"usethis::use_news_md()"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"hex-stickers","dir":"Articles","previous_headings":"Other topics","what":"Hex stickers","title":"R Package Development with Positron","text":"packages need good logo, right? can make : https://connect.thinkr.fr/hexmake/. can add logo ./man/figures/logo.png add bit markdown/HTML README.Rmd, show package README pkgdown docs:","code":"# rpkgdemo <a href='https://github.com/stephenturner/rpkgdemo'><img src='man/figures/logo.png' align=\"right\" height=\"200\" /><\/a>"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"r-universe","dir":"Articles","previous_headings":"Other topics","what":"R Universe","title":"R Package Development with Positron","text":"can create CRAN-like repository https://r-universe.dev/ following short steps described . result package built Windows, Mac, Linux, WebR, provides easy installation instructions users. See R Universe assets package: personal universe: https://stephenturner.r-universe.dev/ rpkgdemo package page: https://stephenturner.r-universe.dev/rpkgdemo Automatically built PDF manual: https://stephenturner.r-universe.dev/rpkgdemo/rpkgdemo.pdf","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"cran-submission","dir":"Articles","previous_headings":"Other topics","what":"CRAN submission","title":"R Package Development with Positron","text":"might want submit package CRAN. devools package can help . ‚Äôll take series questions submit source package CRAN. might want check DavisVaughan/extrachecks information additional ad-hoc checks CRAN maintainers run aren‚Äôt checked devtools::check().","code":"devtools::release()"},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"docker-pracpac","dir":"Articles","previous_headings":"Other topics","what":"Docker & pracpac","title":"R Package Development with Positron","text":"pracpac package makes easy create Docker images R packages. can read paper try via CRAN GitHub.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/articles/rpkgdemo.html","id":"additional-resources","dir":"Articles","previous_headings":"Other topics","what":"Additional resources","title":"R Package Development with Positron","text":"Instead long list resources ‚Äôll date year two, ‚Äôll leave one resource: R Packages book Hadley Wickham Jenny Bryan. ‚Äôs available online free https://r-pkgs.org/. ‚Äôs definitive resource building R packages.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Stephen Turner. Author, maintainer.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Turner S (2025). rpkgdemo: demo package building R packages. R package version 1.0.0, https://github.com/stephenturner/rpkgdemo.","code":"@Manual{,   title = {rpkgdemo: A demo package for building R packages},   author = {Stephen Turner},   year = {2025},   note = {R package version 1.0.0},   url = {https://github.com/stephenturner/rpkgdemo}, }"},{"path":"https://stephenturner.github.io/rpkgdemo/index.html","id":"rpkgdemo-","dir":"","previous_headings":"","what":"A demo package for building R packages","title":"A demo package for building R packages","text":"rpkgdemo package serves demonstration structure R package. View full tutorial vignette: vignette(\"rpkgdemo\"). follow along full tutorial ‚Äôll need following packages installed:","code":"install.packages(c(   \"devtools\",   \"usethis\",   \"roxygen2\",   \"testthat\",   \"knitr\",   \"rmarkdown\",   \"pkgdown\",   \"available\",   \"dplyr\",   \"janitor\",   \"readxl\",   \"stringr\" ))"},{"path":"https://stephenturner.github.io/rpkgdemo/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"A demo package for building R packages","text":"install rpkgdemo, run:","code":"devtools::install_github(\"stephenturner/rpkgdemo\")"},{"path":"https://stephenturner.github.io/rpkgdemo/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"A demo package for building R packages","text":"First, let‚Äôs load package: Standardize sex variables: Read laboratory data: Prepare data analysis annotating city state using zip code, standardizing sex, normalizing lab values: View full tutorial vignette: vignette(\"rpkgdemo\").","code":"library(rpkgdemo) standardize_sex(c(\"Male\", \"f\", \"Trans female\", \"nonbinary\", \"unknown\", NA)) #> [1] \"M\" \"F\" \"O\" \"O\" \"U\" \"U\" fp <- system.file(\"extdata/rped.csv\", package = \"rpkgdemo\", mustWork = TRUE) labdat <- read_labdata(fp) labdat #> # A tibble: 1,000 √ó 6 #>       id sex          age zip    lab1  lab2 #>    <dbl> <chr>      <int> <chr> <dbl> <dbl> #>  1     1 male          26 12345     4    13 #>  2     2 trans male    12 20108     2    12 #>  3     3 unk          130 20108     1     8 #>  4     4 unk           26 20109     1    13 #>  5     5 F             38 20109     5    13 #>  6     6 female        25 20109     0    15 #>  7     7 M             49 20110     6    12 #>  8     8 M             55 20111     4    10 #>  9     9 unk           55 20111     7     7 #> 10    10 F             30 20112     3    12 #> # ‚Ñπ 990 more rows prep_lab_data(labdat) #> Warning in prep_lab_data(labdat): Found 1 bad zip code(s). #> Warning in prep_lab_data(labdat): Found 1 minor(s) in dataset. #> Warning in prep_lab_data(labdat): Found 1 unrealistic age(s) in dataset. #> # A tibble: 1,000 √ó 8 #>       id sex     age zip      lab1     lab2 city     state #>    <dbl> <chr> <int> <chr>   <dbl>    <dbl> <chr>    <chr> #>  1     1 M        26 12345  1.48    0.930   <NA>     <NA>  #>  2     2 O        12 20108  0.0623  0.620   Manassas VA    #>  3     3 U       130 20108 -0.646  -0.623   Manassas VA    #>  4     4 U        26 20109 -0.646   0.930   Manassas VA    #>  5     5 F        38 20109  2.19    0.930   Manassas VA    #>  6     6 F        25 20109 -1.35    1.55    Manassas VA    #>  7     7 M        49 20110  2.90    0.620   Manassas VA    #>  8     8 M        55 20111  1.48   -0.00155 Manassas VA    #>  9     9 U        55 20111  3.60   -0.933   Manassas VA    #> 10    10 F        30 20112  0.771   0.620   Manassas VA    #> # ‚Ñπ 990 more rows"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/prep_lab_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare lab data ‚Äî prep_lab_data","title":"Prepare lab data ‚Äî prep_lab_data","text":"Prepare lab data analysis. Standardizes sex variable, joins zipcodes data, centers scales lab values.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/prep_lab_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare lab data ‚Äî prep_lab_data","text":"","code":"prep_lab_data(x, warnings = TRUE)"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/prep_lab_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare lab data ‚Äî prep_lab_data","text":"x data frame containing lab data least sex, zip, lab value columns starting \"lab\". warnings Logical. Whether issue warnings potential data issues (bad zip codes, minors, unrealistic ages). Default TRUE.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/prep_lab_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare lab data ‚Äî prep_lab_data","text":"data frame standardized sex, joined zipcodes, scaled lab values.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/prep_lab_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare lab data ‚Äî prep_lab_data","text":"","code":"prep_lab_data(rped) #> Warning: Found 1 bad zip code(s). #> Warning: Found 1 minor(s) in dataset. #> Warning: Found 1 unrealistic age(s) in dataset. #> # A tibble: 1,000 √ó 8 #>       id sex     age zip      lab1     lab2 city     state #>    <int> <chr> <dbl> <chr>   <dbl>    <dbl> <chr>    <chr> #>  1     1 M        26 12345  1.48    0.930   NA       NA    #>  2     2 O        12 20108  0.0623  0.620   Manassas VA    #>  3     3 U       130 20108 -0.646  -0.623   Manassas VA    #>  4     4 U        26 20109 -0.646   0.930   Manassas VA    #>  5     5 F        38 20109  2.19    0.930   Manassas VA    #>  6     6 F        25 20109 -1.35    1.55    Manassas VA    #>  7     7 M        49 20110  2.90    0.620   Manassas VA    #>  8     8 M        55 20111  1.48   -0.00155 Manassas VA    #>  9     9 U        55 20111  3.60   -0.933   Manassas VA    #> 10    10 F        30 20112  0.771   0.620   Manassas VA    #> # ‚Ñπ 990 more rows"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/read_labdata.html","id":null,"dir":"Reference","previous_headings":"","what":"Read laboratory data ‚Äî read_labdata","title":"Read laboratory data ‚Äî read_labdata","text":"Read laboratory data file","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/read_labdata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Read laboratory data ‚Äî read_labdata","text":"","code":"read_labdata(file)"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/read_labdata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Read laboratory data ‚Äî read_labdata","text":"file file path","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/read_labdata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Read laboratory data ‚Äî read_labdata","text":"data frame","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/read_labdata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Read laboratory data ‚Äî read_labdata","text":"","code":"fp <- system.file(\"extdata/rped.csv\", package = \"rpkgdemo\", mustWork = TRUE) read_labdata(fp) #> # A tibble: 1,000 √ó 6 #>       id sex          age zip    lab1  lab2 #>    <dbl> <chr>      <int> <chr> <dbl> <dbl> #>  1     1 male          26 12345     4    13 #>  2     2 trans male    12 20108     2    12 #>  3     3 unk          130 20108     1     8 #>  4     4 unk           26 20109     1    13 #>  5     5 F             38 20109     5    13 #>  6     6 female        25 20109     0    15 #>  7     7 M             49 20110     6    12 #>  8     8 M             55 20111     4    10 #>  9     9 unk           55 20111     7     7 #> 10    10 F             30 20112     3    12 #> # ‚Ñπ 990 more rows"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/rped.html","id":null,"dir":"Reference","previous_headings":"","what":"RPED: R Package Example Data ‚Äî rped","title":"RPED: R Package Example Data ‚Äî rped","text":"Simulated data demonstrating functionality rpkgdemo package.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/rped.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"RPED: R Package Example Data ‚Äî rped","text":"","code":"rped"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/rped.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"RPED: R Package Example Data ‚Äî rped","text":"data frame 6 columns: id: unique identifier individual. sex: sex individual. age: age individual. zip: ZIP code individual's residence. lab1: simulated lab value Poisson distribution lambda=2. lab2: simulated lab value Poisson distribution lambda=10.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/rped.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"RPED: R Package Example Data ‚Äî rped","text":"","code":"rped #> # A tibble: 1,000 √ó 6 #>       id sex          age zip    lab1  lab2 #>    <int> <chr>      <dbl> <chr> <int> <int> #>  1     1 male          26 12345     4    13 #>  2     2 trans male    12 20108     2    12 #>  3     3 unk          130 20108     1     8 #>  4     4 unk           26 20109     1    13 #>  5     5 F             38 20109     5    13 #>  6     6 female        25 20109     0    15 #>  7     7 M             49 20110     6    12 #>  8     8 M             55 20111     4    10 #>  9     9 unk           55 20111     7     7 #> 10    10 F             30 20112     3    12 #> # ‚Ñπ 990 more rows"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/rpkgdemo-package.html","id":null,"dir":"Reference","previous_headings":"","what":"rpkgdemo: A demo package for building R packages ‚Äî rpkgdemo-package","title":"rpkgdemo: A demo package for building R packages ‚Äî rpkgdemo-package","text":"package demonstrate building R package accompany workshop building R packages Positron. See getting started vignette details.","code":""},{"path":[]},{"path":"https://stephenturner.github.io/rpkgdemo/reference/rpkgdemo-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"rpkgdemo: A demo package for building R packages ‚Äî rpkgdemo-package","text":"Maintainer: Stephen Turner first.last@example.com (ORCID)","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/standardize_sex.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize Sex Variables ‚Äî standardize_sex","title":"Standardize Sex Variables ‚Äî standardize_sex","text":"Maps various inputs (M, Male, f, Female) standard HL7/ISO codes (M, F, O, U).","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/standardize_sex.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize Sex Variables ‚Äî standardize_sex","text":"","code":"standardize_sex(x)"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/standardize_sex.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize Sex Variables ‚Äî standardize_sex","text":"x character vector sex/gender inputs.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/standardize_sex.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize Sex Variables ‚Äî standardize_sex","text":"character vector containing \"M\", \"F\", \"O\", \"U\".","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/standardize_sex.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Standardize Sex Variables ‚Äî standardize_sex","text":"","code":"standardize_sex(c(\"Male\", \"f\", \"Trans female\", \"nonbinary\", \"unknown\", NA)) #> [1] \"M\" \"F\" \"O\" \"O\" \"U\" \"U\""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/suppress_counts.html","id":null,"dir":"Reference","previous_headings":"","what":"Suppress Low Counts for Privacy ‚Äî suppress_counts","title":"Suppress Low Counts for Privacy ‚Äî suppress_counts","text":"Replaces numeric counts threshold suppression character (NA).","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/suppress_counts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Suppress Low Counts for Privacy ‚Äî suppress_counts","text":"","code":"suppress_counts(x, threshold = 5, symbol = NA)"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/suppress_counts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Suppress Low Counts for Privacy ‚Äî suppress_counts","text":"x numeric vector counts. threshold Numeric. Values strictly less suppressed. Default 5. symbol Character NA. symbol use suppression. Default NA.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/suppress_counts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Suppress Low Counts for Privacy ‚Äî suppress_counts","text":"vector.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/suppress_counts.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Suppress Low Counts for Privacy ‚Äî suppress_counts","text":"","code":"suppress_counts(c(1, 3, 5, 7, 9)) #> [1] NA NA  5  7  9 suppress_counts(c(10, 20, 3, 4, 5), threshold = 10) #> [1] 10 20 NA NA NA suppress_counts(1:10, threshold = 5, symbol = \"*\") #>  [1] \"*\"  \"*\"  \"*\"  \"*\"  \"5\"  \"6\"  \"7\"  \"8\"  \"9\"  \"10\""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/zipcodes.html","id":null,"dir":"Reference","previous_headings":"","what":"ZIP code data ‚Äî zipcodes","title":"ZIP code data ‚Äî zipcodes","text":"ZIP code data US Postal Service.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/zipcodes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"ZIP code data ‚Äî zipcodes","text":"","code":"zipcodes"},{"path":"https://stephenturner.github.io/rpkgdemo/reference/zipcodes.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"ZIP code data ‚Äî zipcodes","text":"data frame three columns zip: ZIP code. city: U.S. city zip code. state: U.S. state zip code.","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/zipcodes.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"ZIP code data ‚Äî zipcodes","text":"https://postalpro.usps.com/ZIP_Locale_Detail","code":""},{"path":"https://stephenturner.github.io/rpkgdemo/reference/zipcodes.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"ZIP code data ‚Äî zipcodes","text":"","code":"zipcodes #> # A tibble: 37,961 √ó 3 #>    zip   city      state #>    <chr> <chr>     <chr> #>  1 00601 Adjuntas  PR    #>  2 00602 Aguada    PR    #>  3 00603 Aguadilla PR    #>  4 00604 Aguadilla PR    #>  5 00605 Aguadilla PR    #>  6 00606 Maricao   PR    #>  7 00610 Anasco    PR    #>  8 00611 Angeles   PR    #>  9 00612 Arecibo   PR    #> 10 00613 Arecibo   PR    #> # ‚Ñπ 37,951 more rows"},{"path":"https://stephenturner.github.io/rpkgdemo/news/index.html","id":"rpkgdemo-100","dir":"Changelog","previous_headings":"","what":"rpkgdemo 1.0.0","title":"rpkgdemo 1.0.0","text":"Initial release.","code":""}]
